{% extends "pyarticle/base.html" %}
{% load static %}
{% load mdfilter %}
{% block content %}
<style>


div#header h1 {
  border-bottom: solid 3px #ccc;
  position: relative;
}

div#header h1:after {
  position: absolute;
  content: " ";
  display: block;
  border-bottom: solid 3px #000;
  bottom: -3px;
  width: 20%;
}


div#mde table, th, td {
  border-collapse: collapse;
  border: 1px solid #ccc;
  line-height: 1.5;
}

div#mde th {
  width: 150px;
  padding: 10px;
  font-weight: bold;
  vertical-align: top;
  background: #3f3f3f;
  color: #ffffff;
}
div#mde td {
  width: 350px;
  padding: 10px;
  vertical-align: top;
}

 h1 {
  font-size:30px;
  padding: .5em .75em;
  background-color: #f6f6f6;
  border-radius: 6px;
}

div#mde h2 {
  font-size:25px;
  padding-bottom: .5em;
  border-bottom: 1px solid #ccc;
}


div#mde h3 {
  font-size:20px;
  padding: .25em 0 .25em .75em;
  border-left: 6px solid #ccc;
}

div#mde h4 {
  font-size:20px;
 padding: .5em .75em;
  border: 1px solid #ccc;
}

div#mde pre {
  background-color: #444444;
  color: #ffffff;
  padding: 10px
}


</style>


<div class="row">
    <div class="col-md-3">
        {% if user.is_authenticated %}
        <p class="text-left">
            <span class="badge badge-info">
                <a class="p-2 text-white" href="{% url 'add_chapter' book.id %}">章追加</a>
            </span>
        </p>
        {% endif %}
        {% for c in chapter_list %}
            <p>
                {% if user.is_authenticated %}
                <span class="badge badge-danger">
                    <a class="p-2 text-white" href="{% url 'delete_chapter' book.id c.id%}">削除</a>
                </span>
                {% endif %}
                <a href="{% url 'disp_chapter' book.id c.id %}">{{c.chapter}}</a>
            </p>
        {% endfor %}
    </div>
    <div class="col-md-9">
        {% if user.is_authenticated %}
        <p class="text-right">
            <span class="badge badge-info">
                <a class="p-2 text-white" href="{% url 'edit_chapter' book.id chapter.id %}">章編集</a>
            </span>
        </p>
        {% endif %}
        <div id="header">
            <h1 class="pb-3 mb-4 font-italic">
                {{section.chapter}}
            </h1>
        </div>
        <p>
            {% if user.is_authenticated %}
                <p class="text-right">
                    <span class="badge badge-info">
                        <a class="p-2 text-white" href="{% url 'add_section' book.id chapter.id %}">ページの追加</a>
                    </span>
            {%endif %}

            {% if user.is_authenticated %}
                {% if section %}
                    <span class="badge badge-success">
                        <a class="p-2 text-white" href="{% url 'edit_section' book.id chapter.id section.id %}">ページ編集</a>
                    </span>
                    <span class="badge badge-danger">
                        <a class="p-2 text-white" href="{% url 'delete_section' book.id chapter.id section.id%}">ページ削除</a>
                    </span>
                {% endif %}
            </p>
            {% endif %}
            <div id="mde">
            {{section.text  | markdown2html | safe }}
            </div>

        </p>
        <p>
             Page {{ now_page }} of {{ total_page }}.
        </p>
        <p class="text-center">

            {% if prev_page > 0 %}
                 <a href="{% url 'disp_book' book.id prev_page %}">前のページ</a>
            {% endif %}
            {% if next_page <= total_page %}
                <a href="{% url 'disp_book' book.id next_page %}">次のページ</a>
            {% endif %}
        </p>
    </div>
</div>


{% endblock %}